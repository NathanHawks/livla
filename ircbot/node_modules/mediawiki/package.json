{
  "name": "mediawiki",
  "version": "0.0.14",
  "description": "A JavaScript framework for the MediaWiki API.",
  "main": "mediawiki.js",
  "keywords": [
    "wikimedia",
    "bot",
    "library",
    "api"
  ],
  "author": {
    "name": "Oliver Moran",
    "email": "oliver.moran@gmail.com"
  },
  "license": "GPL",
  "dependencies": {
    "request": "~2.34.0"
  },
  "bugs": {
    "url": "https://github.com/oliver-moran/mediawiki/issues"
  },
  "homepage": "https://github.com/oliver-moran/mediawiki",
  "readme": "MediaWiki\n=========\n\nThis [Node.js](http://nodejs.org/) module is a JavaScript framework for the [MediaWiki API](https://www.mediawiki.org/wiki/API:Main_page). An example use is to used to create a bot to edit Wikipedia. This bot could be run from your own computer or from a remote computer. To run a bot process in the cloud, you could consider using a service like [Cloud9](https://c9.io).\n\nThe framework provides generic methods to make calls to the MediaWiki API. The framework also includes a collection of pre-baked functions that build on the generic methods to perform specific tasks (e.g. logging in, editing a page, and logging out).\n\nThis collection is far from complete. So, if you can code, why not [fork this project](https://github.com/oliver-moran/mediawiki/fork) and work on implementing a [baked-in functions](https://github.com/oliver-moran/mediawiki/issues?labels=Functions&page=1&state=open) in the backlog? Or, if you have an idea for pre-baked function, why not [make a feature request](https://github.com/oliver-moran/mediawiki/issues)?\n\nIn any case, have fun!\n\nInstallation\n------------\n\nInstall on Node.js using:\n\n    npm install mediawiki\n\nTo create a bot, create a new instance of the Bot class from the module:\n\n    var MediaWiki = require(\"mediawiki\");\n    var bot = new MediaWiki.Bot();\n\nNow, you can use the generic wrapper method to make any API call, like this:\n\n    bot.get({ action: \"query\", meta: \"userinfo\" }).complete(function (response) {\n        console.log(response.query.userinfo);\n    });\n    \nOr, you can use one of the pre-baked functions to make the same call like this:\n    \n    bot.userinfo().complete(function (userinfo) {\n        console.log(userinfo);\n    });\n    \nSee the include example (`examples/example.js`) for further examples.\n    \nSettings\n--------\n\nA bot can have the following settings:\n\n - `endpoint` The location of the target MediaWiki API. Default: \"http://en.wikipedia.org:80/w/api.php\".\n - `rate` The number of miliseconds to wait between making API requests. Default: 6 seconds.\n - `userAgent`: The user agent to use with the bot. Default: \"MediaWiki/x.y.z; Node/x.y.z; <https://github.com/oliver-moran/mediawiki>\".\n - `byeline`: A string to append to every edit summary. Default: \"(using the MediaWiki module for Node.js)\".\n\nThese can be set like this:\n\n    var bot = new WikiMedia.Bot();\n    bot.settings.endpoint = \"https://en.wiktionary.org/w/api.php\";\n    bot.settings.rate = 60e3 / 10;\n    bot.settings.userAgent = \"ExampleBot <https://en.wiktionary.org/wiki/User:Example>\";\n    bot.settings.byeline = \"(example bot edit)\";\n        \nThese can also be set with the constructor, like this:\n    \n    var bot = new WikiMedia.Bot({\n        endpoint: \"https://en.wiktionary.org/w/api.php\",\n        rate: 60e3 / 10,\n        userAgent: \"ExampleBot <https://en.wiktionary.org/wiki/User:Example>\",\n        byeline: \"(example bot edit)\"\n    });\n\nIf a settings isn't specified then the default setting will be used.\n\nMethods\n-------\n\nThe framework provides two generic wrapper methods. One for HTTP GET requests and another for HTTP POST requests. The signatures for these are identical:\n\n    bot.get(Object args[, Boolean isPriority]);\n    bot.post(Object args[, Boolean isPriority]);\n\n - `args` A JavaScript Object corresponding to the arguments to be passed to the [WikiMedia API](https://www.mediawiki.org/wiki/API:Main_page) call.\n - `isPriority` (optional) A Boolean. If true, the request will be added to the front of the request queue (i.e. will be executed before all other queued requests). Default: false.\n\nBoth of these methods return a [promise](https://en.wikipedia.org/wiki/Futures_and_promises). This promise is used to set complete and error callbacks, as follows:\n\n    var request = bot.get({ action: \"query\", meta: \"userinfo\" });\n    \n    request.complete(function (response) {\n        console.log(response.query.userinfo);\n    });\n    \n    request.error(function (err) {\n        console.log(err.toString());\n    });\n\nThe complete and error callbacks can also be set succinctly like this:\n\n    bot.get({ action: \"query\", meta: \"userinfo\" }).complete(function (response) {\n        console.log(response.query.userinfo);\n    }).error(function (err) {\n        console.log(err.toString());\n    });\n\nThe complete callback receives a single JavaScript Object containing the response from the API. The error callback receives a JavaScript Error object with basic information about what went wrong.\n\nYou do not have to set the complete or error callback for any request. The default complete callback will do nothing. The default error callback will throw an exception. In all cases, if the error callback is called, the complete callback is never called.\n\nPre-baked functions\n--------------------\n\nAs well a providing a generic methods for interacting with the WikiMedia API, the module also provides a set of pre-baked functions that automate specific tasks (e.g. to log in, edit a page, and log out).\n\nThe pre-baked functions and their complete callbacks all take specific arguments. However, the error callback for each is identical and receives a single JavaScript Error object with basic information about what went wrong. As well as responding to HTTP errors and parsing problems, the error callback for pre-baked functions also fires for specific errors conditions that vary per function. For example, the error callback for the log in function will fire if the wrong user password is supplied.\n\nThe last argument in each method is an optional Boolean. As with the generic wrapper methods, if this argument is true then the method will be added to the top of the request queue. See the documentation for working with queued requests below for example usage of the `isPriority` argument.\n\nThe current list of pre-baked functions and the arugments they receive is as follows:\n\n    // log in to the wiki\n    bot.login(String user, String password[, Boolean isPriority]).complete(function (String username) {\n        console.log(\"Logged in as \" + username);\n    });\n\n    // log out of the wiki\n    bot.logout([Boolean isPriority]).complete(function () {\n        console.log(\"Logged out!\");\n    });\n\n    // get the user name of the current user\n    bot.whoami([Boolean isPriority]).complete(function (String username) {\n        console.log(\"You are \" + username);\n    });\n\n    // get information about the current user\n    bot.userinfo([Boolean isPriority]).complete(function (Object userinfo) {\n        console.log(userinfo);\n    });\n\n    // get the text and last revision date of a page\n    bot.page(String title[, Boolean isPriority]).complete(function (String title, String text, Date date) {\n        console.log(title);\n        console.log(text.length);\n        console.log(date);\n    });\n\n    // get information on the last n number of edits to a page\n    bot.history(String title, Number count[, Boolean isPriority]).complete(function (String title, Array<Object> history) {\n        console.log(title);\n        console.log(history.length);\n    });\n\n    // get the text and revision date of a specific revision to a page\n    bot.revision(Number id[, Boolean isPriority]).complete(function (String title, String text, Date date) {\n        console.log(title);\n        console.log(text.length);\n        console.log(date);\n    });\n\n    // replace the contents of a page with text\n    bot.edit(String title, String text, String summary[, Boolean isPriority]).complete(function (String title, Number revision, Date date) {\n        console.log(title);\n        console.log(revision);\n        console.log(date.toString());\n    });\n    \n    // append a new section to a page\n    bot.add(String title, String heading, String text[, Boolean isPriority]).complete(function (String title, Number revision, Date date) {\n        console.log(title);\n        console.log(revision);\n        console.log(date.toString());\n    });\n\n    // list the members of a category\n    bot.category(String category).complete(function (String category, Array<String> pages, Array<String> subcategories) {\n        console.log(category);\n        console.log(pages.length);\n        console.log(subcategories.length);\n    });\n    \nQueued requsts\n--------------\n\nAll requests an queued and executed in order. By default, there is a 6-second pause between requests. However, note that some pre-baked functions are comprised of a number of seperate requests so may appear to take longer.\n\nThe following will execute in sequence:\n\n    bot.login(\"example\", \"password\");\n    bot.edit(\"User:Example/sandbox\", \"Hello, World\", \"this is a test edit\");\n    bot.logout();\n    \nThere are times, when you will want to make sure request inside a callback are priorities above request already on the queue. In that case, set the `isPriority` argument to `true` for the nested requests and they will be executed before other (already) queued requests.\n\nThe following will resore to the previous version of the page before logging out:\n\n    bot.login(\"example\", \"password\");\n\n    bot.history(\"User:Example/sandbox\", 2).complete(function (title, history) {\n        var id = history[1].revid; // previous revision id\n        bot.revision(id, true).complete(function (title, text, date) {\n            bot.edit(title, text, \"restore to previous revision\", true);\n        });\n    });\n    \n    bot.logout();\n\nWeb-browser support\n-------------------\n\nThe module is written so as to be also executable as a JavaScript library in a web browser. However, your are likely to encounter cross-domain security issues if the library is executed in a web browser from a different domain to the target MediaWiki installation.\n\nSee included example (`examples/browser.html`) for sample use in a web-browser.\n\nLicense\n-------\n\nThis module is licensed under the [General Public License](http://opensource.org/licenses/GPL-3.0).\n",
  "readmeFilename": "README.md",
  "_id": "mediawiki@0.0.14",
  "_from": "mediawiki@"
}
