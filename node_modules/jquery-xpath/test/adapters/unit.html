<!DOCTYPE html>
<html att="val">
	<head>
		<title>JsUnit testing page</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

		<!-- Library -->
		<script type="text/javascript" src="../lib/jquery.min.js"></script>
		<!--script type="text/javascript" src="../../src/jquery.xpath.js"></script-->
		<script type="text/javascript" src="../../jquery.xpath.min.js"></script>
		<script type="text/javascript" src="unit.js"></script>

		<script type="text/javascript">
			var failed	= 0,
				passed	= 0;
			function test(sName, fTest) {
				document.getElementById("log").appendChild(document.createElement("div")).innerHTML	= "<h3>" + sName + "</h3>";

				fTest();
			}

			function assertEquals(vExpected, vReturned) {
				var bPassed	= vExpected == vReturned;

				if (bPassed)
					passed++;
				else
					failed++;
				document.getElementById("passed").innerHTML	= passed;
				document.getElementById("failed").innerHTML	= failed;

				document.getElementById("log").appendChild(document.createElement("div")).innerHTML	=
					'<div style="color:' + (bPassed ? "green" : "red") + '">\
						<div>Expected: ' + vExpected + '</div>\
						<div>Returned: ' + vReturned + '</div>\
					</div>';
			}
		</script>

		<script type="text/javascript">
			// Helper function
			function evaluateXPath(sXPath, vContext, nType) {
				//return $(vContext).xpath(sXPath, function(prefix) {if (prefix == "ns")return "my_ns";});
				return $(vContext).xpath(sXPath, function(prefix) {if (prefix == "ns")return "my_ns";});
			}

			function evaluateXPathNumber(sXPath, vContext) {
				return 0 + evaluateXPath(sXPath, vContext)[0];
			}

			function evaluateXPathString(sXPath, vContext) {
				return '' + evaluateXPath(sXPath, vContext)[0];
			}

			function evaluateXPathError(sXPath, vContext) {
				var value	= null,
					error	= null;
				try {
					value	= evaluateXPathSingle(sXPath, vContext);
				}
				catch (e) {
					error	= e.code;
				}
				return error;
			}

		</script>

		<script type="text/javascript">
			// DOMParser shim
			if (!window.DOMParser) {
				window.DOMParser	= function(){};
				DOMParser.prototype.baseURI	= null;
				DOMParser.prototype.parseFromString	= function(sXml, sType) {
					var oDocument	= new ActiveXObject("Microsoft.XMLDOM");
					oDocument.async				= false;
					oDocument.validateOnParse	= false;
					oDocument.preserveWhiteSpace= true;
					oDocument.resolveExternals	= false;
					oDocument.loadXML(sXml);
					return oDocument;
				};
			}
			// XMLHttpRequest shim
			if (!window.XMLHttpRequest) {
				window.XMLHttpRequest	= function() {
					return new ActiveXObject("Microsoft.XMLHTTP");
				};
			}
		</script>
	</head>
	<body>
		<p>jquery-xpath JsUnit unit page</p>
		<div id="id-root">
			<p att="val"></p>
			<div id="id-text">some text</div>
			<div id="id-comment"><!--some comment--></div>
			<div id="id-attribute" attribute="some attribute"></div>
			<div id="id-element">some element</div>
		</div>
		<br />
		<div>
			<div style="color:green">Passed: <span id="passed"></span> </div>
			<div style="color:red">Failed: <span id="failed"></span> </div>
		</div>
		<div id="log"></div>
		<div data-attr="value1"></div>
		<div data-attr="value2"></div>
		<div data-attr="value3" data-val="3"></div>
		<div data-attr="value2" data-val="1"></div>
		<div data-attr="value1" data-val="2"></div>
	</body>
</html>